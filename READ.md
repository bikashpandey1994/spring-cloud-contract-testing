# What is Spring Cloud Contract


1. 	Spring Cloud Contract is a project that helps users implement the Consumer Driven Contracts approach for JVM-based applications. 

2.	It includes a tool(Spring Cloud Contract Verifier) that produces stub definitions, test code, and acceptance tests from contracts expressed in Groovy or YAML for producer side.

3.	The tool also verifies if the producer-side implementation of the API is compliant with the contract.

4. 	For cosumer side developer have to still write test cases mannually.

5.  But he doesn't have to run the producer MS,instead a stub generated by Spring Cloud Contract Verifier for producer will provide the response.


# Steps to configure producer Side :

1. **Add below dependency to pom.xml**

	`
	<dependency>
		<groupId>org.springframework.cloud</groupId>
		<artifactId>spring-cloud-starter-contract-verifier</artifactId>
		<scope>test</scope>
	</dependency>`
	
2. **Create BaseTestClass in test directory. A sample is given below**

	`
	@DirtiesContext
	@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.MOCK)
	@AutoConfigureMessageVerifier
	public class BaseContractTest {

		@Autowired
		HomeController controller;

		@BeforeEach
		public void setup() {
			StandaloneMockMvcBuilder standaloneMockMvcBuilder
					= MockMvcBuilders.standaloneSetup(controller);
			RestAssuredMockMvc.standaloneSetup(standaloneMockMvcBuilder);
		}
	}`

3. **Add below plug-ins to pom.xml. It helps in generating contract test cases during compilation.**

	`
	<build>
		<plugins>
			<plugin>
				<groupId>org.springframework.cloud</groupId>
				<artifactId>spring-cloud-contract-maven-plugin</artifactId>
				<version>${spring-cloud-contract.version}</version>
				<extensions>true</extensions>
				<configuration>
					<baseClassForTests>com.example.contractTest.BaseTestClass</baseClassForTests>
				</configuration>
			</plugin>
			<plugin>
				<groupId>org.springframework.boot</groupId>
				<artifactId>spring-boot-maven-plugin</artifactId>
			</plugin>
		</plugins>
	</build>
	`
	
4.	**Add contract defination in groovy or YAML. A sample is given below**

	`
	import org.springframework.cloud.contract.spec.Contract

	Contract.make {
		description "should return true for even"
		request{
			method GET()
			url("/check-if-even") {
				queryParameters {
					parameter("number", "2")
				}
			}
		}
		response {
			body("true")
			status 200
		}
	}`
	
5. 	**Running ./mvnw clean install automatically generates tests that verify the application compliance with the added contracts**